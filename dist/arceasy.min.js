module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=5)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var prefix=exports.prefix="ArcEasy";var global=exports.global={map:"",view:"",options:{cdn:"https://js.arcgis.com/4.3/",element:"",scale:25e6,center:{longitude:-13.78,latitude:-52.17},basemap:"streets",stars:true,atmosphere:{enable:true,quality:"low"},search:{enable:false,position:"top-left",index:1},cors:"",proxy:""},loaded:false};var constructors=exports.constructors={layer:{FeatureLayer:"",TileLayer:""},map:"",container:"",view:"",utils:{watchUtils:"",Search:"",jsonUtils:"",Extent:""},renderer:{UniqueValueRenderer:"",ClassBreaksRenderer:"",ExtrudeSymbol3DLayer:"",PolygonSymbol3D:"",SimpleRenderer:"",SimpleMarkerSymbol:"",PictureMarkerSymbol:"",SimpleLineSymbol:"",SimpleFillSymbol:""}};var templates=exports.templates={renderers:[],symbols:[]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.warn=exports.fatal=exports.error=exports.log=undefined;var _config=__webpack_require__(0);var logCounter=0;var errorCounter=0;var fatalCounter=0;var warnCounter=0;var log=exports.log=function log(message,_object){var object=_object!==undefined?_object:"";logCounter++;return console.log(logCounter+" [LOG|"+_config.prefix+"] "+message,object)};var error=exports.error=function error(message,_object){var object=_object!==undefined?_object:"";errorCounter++;return console.error(errorCounter+" [ERROR|"+_config.prefix+"] "+message,object)};var fatal=exports.fatal=function fatal(message){fatalCounter++;throw new Error(fatalCounter+" [FATAL|"+_config.prefix+"] "+message)};var warn=exports.warn=function warn(message,_object){var object=_object!==undefined?_object:"";warnCounter++;return console.warn(warnCounter+" [WARN|"+_config.prefix+"] "+message,object)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.changeBasemap=exports.newPosition=exports.createView=undefined;var _logger=__webpack_require__(1);var logger=_interopRequireWildcard(_logger);var _config=__webpack_require__(0);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var createView=exports.createView=function createView(map,View,options){if(_config.global.loaded){logger.log("Creating View...");var view=new View({container:options.element,map:map,scale:options.scale,center:[options.center.longitude,options.center.latitude],viewingMode:"global",starsEnabled:options.stars,atmosphereEnabled:options.atmosphere.enable});view.then(function(){logger.log("View ready!");controlUI(view);watcherRunning(map,view)});return view}else{logger.fatal("Fatal error! You need set some map options.")}};var watcherRunning=function watcherRunning(map,view){var watchUtils=_config.constructors.utils.watchUtils;watchUtils.whenTrue(view,"stationary",function(){logger.log("View changed! Refreshing layers...");refreshExtent(map,view)})};var refreshExtent=function refreshExtent(map,view){var urlQuery="!xmin="+view.extent.xmin+"!xmax="+view.extent.xmax+"!ymin="+view.extent.ymin+"!ymax="+view.extent.ymax;map.allLayers.map(function(layer){if((view.scale<layer.minScale&&view.scale>layer.maxScale||layer.minScale===0&&layer.maxScale===0)&&layer.raw!==undefined&&layer.visible){if(layer.raw.type===0){logger.log("Getting extent to request "+layer.title);logger.log("Requesting to server: "+layer.raw.url+"/where="+urlQuery);layer.outOfRange=false;layer.definitionExpression=urlQuery}logger.log("Drawing layer: "+layer.title)}else{logger.log("View changed but "+layer.title+" is out of range");layer.outOfRange=true}})};var controlUI=function controlUI(view){logger.log("Changing UI elements...");view.environment.atmosphere.quality=_config.global.options.atmosphere.quality;if(_config.global.options.search.enable){var Search=_config.constructors.utils.Search;var searchWidget=new Search({view:view});view.ui.add(searchWidget,{position:_config.global.options.search.position,index:_config.global.options.search.index})}view.ui.remove(["zoom","compass","navigation-toggle"])};var newPosition=exports.newPosition=function newPosition(_ref){var coordinates=_ref.coordinates,scale=_ref.scale,camera=_ref.camera;if(coordinates&&scale&&camera){var view=_config.global.view;view.goTo({center:[coordinates.longitude,coordinates.latitude],scale:scale,tilt:camera.tilt,heading:camera.heading});logger.log("Changing map position...")}else{logger.error("You need set a new position formed by a pair of coordinates, a new scale and new camera positions")}};var changeBasemap=exports.changeBasemap=function changeBasemap(basemap){if(basemap){var map=_config.global.map;map.basemap=basemap;logger.log("Change basemap...")}else{logger.error("You need set a new basemap")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showAll=exports.hideAll=exports.setOpacity=exports.setVisibility=exports.all=exports.add=undefined;var _logger=__webpack_require__(1);var logger=_interopRequireWildcard(_logger);var _config=__webpack_require__(0);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var add=exports.add=function add(layers){layers.map(function(layer,indx){if(validate(layer)){if(layer.id===undefined||layer.id===""||!layer.id){logger.log("Adding id by index on layer");layer.id=indx}layer.outOfRange=true;_config.global.map.add(create(layer))}})};var validate=function validate(layer){if(layer){!layer.title||logger.log("Validating layer: "+layer.title);if(layer.title===undefined||layer.title===""||!layer.title){logger.fatal("You need provide a layer title");return false}if(layer.visible===undefined||layer.visible===""){layer.visible=true;logger.warn("You not set intial visible. Usign default: true")}if(layer.definitionExpression===undefined||layer.definitionExpression===""){layer.definitionExpression="";logger.warn("You not set intial definitionExpression. Usign default: ''")}if(layer.type===undefined||layer.type===""||layer.type===false){logger.fatal("You need provide a layer type (0 = FeatureLayer, 1 = TileLayer)");return false}if(layer.url===undefined||layer.url===""||!layer.url){logger.fatal("You need provide an URL layer");return false}return true}else{logger.fatal("You need pass some informations to describe your layer");return false}};var create=function create(_layer){var layerConstructors=_config.constructors.layer;var utilsConstructors=_config.constructors.utils;var jsonUtils=utilsConstructors.jsonUtils;var LayerType=void 0;if(_layer.type===0){logger.log("Creating new Feature Layer...");LayerType=layerConstructors.FeatureLayer}else if(_layer.type===1){logger.log("Creating new Tile Layer...");LayerType=layerConstructors.TileLayer}logger.log("Adding layer on map: "+_layer.title+" | Initial visibility: "+_layer.visible);var layer=new LayerType({id:_layer.id,url:_layer.url,definitionExpression:_layer.definitionExpression,raw:_layer,visible:_layer.visible});logger.log("Loading layer from: "+_layer.url);if(layer.raw.renderer){logger.log("Applying renderer...");layer.renderer=jsonUtils.fromJSON(layer.raw.renderer)}layer.then(function(){logger.log("Layer "+layer.title+" ready!");if(layer.raw.type===1){layer.minScale=layer.raw.minScale!==null&&parseInt(layer.raw.minScale)!==0?layer.raw.minScale:0;layer.maxScale=layer.raw.maxScale!==null&&parseInt(layer.raw.maxScale)?layer.raw.maxScale:0;logger.log("minScale: "+parseInt(layer.minScale)+" and maxScale: "+parseInt(layer.maxScale)+" defined manually")}});return layer};var find=function find(_layer){var map=_config.global.map;return map.allLayers.find(function(layer){if(layer.raw!==undefined){if(layer.raw.title===_layer||layer.raw.id===_layer){return layer}}})};var all=exports.all=function all(){var map=_config.global.map;return map.allLayers._items};var setVisibility=exports.setVisibility=function setVisibility(_layer,visibility){var layer=find(_layer);if(layer){layer.visible=visibility;logger.log("Change visibility of layer: "+_layer+" to: "+visibility)}else{logger.error("Can't find layer: "+_layer+" in map. You already added this layer?")}};var setOpacity=exports.setOpacity=function setOpacity(_layer,_opacity){var layer=find(_layer);if(layer){layer.opacity=_opacity/100;logger.log("Change opacity of layer: "+_layer+" to: "+_opacity)}else{logger.error("Can't find layer: "+_layer+" in map. You already added this layer?")}};var changeVisibility=function changeVisibility(visibility){var map=_config.global.map;map.allLayers.map(function(layer){if(layer.raw!==undefined){if(layer.visible===!visibility){layer.visible=visibility;logger.log("Change visibility of layer: "+layer.raw.title+" to: "+visibility)}}})};var hideAll=exports.hideAll=function hideAll(){changeVisibility(false)};var showAll=exports.showAll=function showAll(){changeVisibility(true)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.options=undefined;var _esriLoader=__webpack_require__(6);var esriLoader=_interopRequireWildcard(_esriLoader);var _logger=__webpack_require__(1);var logger=_interopRequireWildcard(_logger);var _view=__webpack_require__(2);var _config=__webpack_require__(0);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var options=exports.options=function options(_options){if(_options){_options.cdn||logger.warn("You not set any ESRI CDN. Usign default: "+_config.global.options.cdn);_options.element||logger.fatal("You need pass an valid DOM element");_options.scale||logger.warn("You not set scale. Usign default scale: "+_config.global.options.scale);if(_options.center){_options.center.longitude||logger.warn("You not set intial longitude. Usign default: "+_config.global.options.center.longitude);_options.center.latitude||logger.warn("You not set intial latitude. Usign default: "+_config.global.options.center.latitude)}else{logger.warn("You not set the map center. Usign defaults | longitude: "+_config.global.options.center.longitude+", latitude: "+_config.global.options.center.latitude)}_options.basemap||logger.warn("You not set initial basemap. Usign default: "+_config.global.options.basemap);_options.stars===true||_options.stars===false||logger.warn("You not set if map usign stars. Usign default: "+_config.global.options.stars);if(_options.atmosphere){_options.atmosphere.enable===true||_options.atmosphere.enable===false||logger.warn("You not set if map usign atmosphere efect. Usign default: "+_config.global.options.atmosphere.enable);_options.atmosphere.quality||logger.warn("You not set atmosphere quality. Usign default: "+_config.global.options.atmosphere.quality)}else{logger.warn("You not set the atmosphere options. Usign defaults | enable: "+_config.global.options.atmosphere.enable+", quality: "+_config.global.options.atmosphere.quality)}if(_options.search){_options.search.enable===true||_options.search.enable===false||logger.warn("You not set Search. Usign default: "+_config.global.options.search.enable);_options.search.position||logger.warn("You not set Search position. Usign default: "+_config.global.options.search.position);_options.search.index||logger.warn("You not set Search index. Usign default: "+_config.global.options.search.index)}else{logger.warn("You not set the search options. Usign defaults | enable: "+_config.global.options.search.enable+", position: "+_config.global.options.search.position+", index: "+_config.global.options.search.index)}_options.cors&&_options.cors.length>0||logger.warn("You not set any URL to enable CORS requests");_options.proxy||logger.warn("You not set any URL to proxy your requests");_config.global.options={cdn:_options.cdn||_config.global.options.cdn,element:_options.element,scale:_options.scale||_config.global.options.scale,center:{longitude:_options.center&&_options.center.longitude||_config.global.options.center.longitude,latitude:_options.center&&_options.center.latitude||_config.global.options.center.latitude},basemap:_options.basemap||_config.global.options.basemap,stars:_options.stars||_config.global.options.stars,atmosphere:{enable:_options.atmosphere&&_options.atmosphere.enable||_config.global.options.atmosphere.enable,quality:_options.atmosphere&&_options.atmosphere.quality||_config.global.options.atmosphere.quality},search:{enable:_options.search&&_options.search.enable||_config.global.options.search.enable,position:_options.search&&_options.search.position||_config.global.options.search.position,index:_options.search&&_options.search.index||_config.global.options.search.index},cors:_options.cors||"",proxy:_options.proxy||""};_config.global.loaded=true;logger.log("Ready to start!")}else{logger.fatal("You need pass some informations to describe your map")}};var start=exports.start=function start(){var cdn=_config.global.options.cdn;if(cdn!==undefined&&_config.global.loaded){if(!esriLoader.isLoaded()){esriLoader.bootstrap(function(err){if(err){logger.error(err)}logger.log("Waiting ESRI server...");dojoLoader()},{url:cdn})}else{logger.log("Waiting ESRI server...");dojoLoader()}}else{logger.fatal("Fatal error! You must provider an CDN.")}};var dojoLoader=function dojoLoader(){if(_config.global.loaded){esriLoader.dojoRequire(["esri/config","esri/Map","esri/Graphic","esri/Camera","esri/views/SceneView","esri/layers/FeatureLayer","esri/layers/TileLayer","esri/layers/GraphicsLayer","esri/core/watchUtils","esri/core/Collection","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer","esri/renderers/SimpleRenderer","esri/renderers/support/jsonUtils","esri/symbols/ExtrudeSymbol3DLayer","esri/symbols/PolygonSymbol3D","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PointSymbol3D","esri/symbols/ObjectSymbol3DLayer","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent","esri/widgets/Search","dojo/on","dojo/domReady!"],function(esriConfig,Map,Graphic,Camera,SceneView,FeatureLayer,TileLayer,GraphicsLayer,watchUtils,Collection,UniqueValueRenderer,ClassBreaksRenderer,SimpleRenderer,jsonUtils,ExtrudeSymbol3DLayer,PolygonSymbol3D,SimpleMarkerSymbol,PictureMarkerSymbol,SimpleLineSymbol,SimpleFillSymbol,PointSymbol3D,ObjectSymbol3DLayer,Geometry,Point,Extent,Search,on){_config.global.options.cors.forEach(function(elm){esriConfig.request.corsEnabledServers.push(elm)});esriConfig.request.proxyUrl=_config.global.options.proxy||"";_config.constructors.Map=Map;_config.constructors.SceneView=SceneView;_config.constructors.layer.FeatureLayer=FeatureLayer;_config.constructors.layer.TileLayer=TileLayer;_config.constructors.layer.GraphicsLayer=GraphicsLayer;_config.constructors.utils.watchUtils=watchUtils;_config.constructors.utils.Search=Search;_config.constructors.utils.jsonUtils=jsonUtils;_config.constructors.utils.Extent=Extent;_config.constructors.utils.Camera=Camera;_config.constructors.renderer.UniqueValueRenderer=UniqueValueRenderer;_config.constructors.renderer.ClassBreaksRenderer=ClassBreaksRenderer;_config.constructors.renderer.ExtrudeSymbol3DLayer=ExtrudeSymbol3DLayer;_config.constructors.renderer.PolygonSymbol3D=PolygonSymbol3D;_config.constructors.renderer.SimpleRenderer=SimpleRenderer;_config.constructors.renderer.SimpleMarkerSymbol=SimpleMarkerSymbol;_config.constructors.renderer.PictureMarkerSymbol=PictureMarkerSymbol;_config.constructors.renderer.SimpleLineSymbol=SimpleLineSymbol;_config.constructors.renderer.SimpleFillSymbol=SimpleFillSymbol;_config.constructors.renderer.Graphic=Graphic;_config.constructors.renderer.Point=Point;_config.constructors.renderer.PointSymbol3D=PointSymbol3D;_config.constructors.renderer.ObjectSymbol3DLayer=ObjectSymbol3DLayer;if(_config.constructors.Map&&_config.constructors.SceneView){logger.log("All constructorss created!");_config.global.map=createMap(_config.constructors.Map,_config.global.options.basemap);_config.global.view=(0,_view.createView)(_config.global.map,_config.constructors.SceneView,_config.global.options)}else{logger.error("Error during creating the necessary constructors... Try again.")}})}else{logger.fatal("Fatal error! You need set some map options.")}};var createMap=function createMap(Map,basemap){logger.log("Creating map...");var map=new Map({basemap:basemap,ground:"world-elevation",layers:[]});return map}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.layers=exports.view=exports.map=undefined;var _map=__webpack_require__(4);var map=_interopRequireWildcard(_map);var _view=__webpack_require__(2);var view=_interopRequireWildcard(_view);var _layers=__webpack_require__(3);var layers=_interopRequireWildcard(_layers);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}exports.map=map;exports.view=view;exports.layers=layers},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});__webpack_exports__["isLoaded"]=isLoaded;__webpack_exports__["bootstrap"]=bootstrap;__webpack_exports__["dojoRequire"]=dojoRequire;function getScript(){return document.querySelector("script[data-esri-loader]")}function isLoaded(){return typeof window["require"]!=="undefined"&&getScript()}function bootstrap(callback,options){if(options===void 0){options={}}if(!options.url){options.url="https://js.arcgis.com/4.3/"}if(getScript()){callback(new Error("The ArcGIS API for JavaScript is already loaded."));return}var script=document.createElement("script");script.type="text/javascript";script.src=options.url;script.dataset["esriLoader"]="loading";script.onload=function(){script.dataset["esriLoader"]="loaded";var dojoRequire=window["require"];if(callback){callback(null,dojoRequire)}};document.body.appendChild(script)}function dojoRequire(modules,callback){if(isLoaded()){window["require"](modules,callback)}else{var script_1=getScript();if(script_1){var onScriptLoad_1=function(){window["require"](modules,callback);script_1.removeEventListener("load",onScriptLoad_1,false)};script_1.addEventListener("load",onScriptLoad_1)}else{throw new Error("The ArcGIS API for JavaScript has not been loaded. You must first call esriLoader.bootstrap()")}}}__webpack_exports__["default"]={isLoaded:isLoaded,bootstrap:bootstrap,dojoRequire:dojoRequire}}]);
//# sourceMappingURL=arceasy.min.js.map