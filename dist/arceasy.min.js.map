{"version":3,"sources":["webpack:///arceasy.min.js","webpack:///webpack/bootstrap 801b42b83388b6329a04","webpack:///./config.js","webpack:///./logger.js","webpack:///./view.js","webpack:///./layers.js","webpack:///./map.js","webpack:///./index.js","webpack:///../~/esri-loader/src/esri-loader.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","prefix","global","map","view","options","element","scale","center","longitude","latitude","basemap","stars","atmosphere","enable","quality","search","position","index","cors","proxy","loaded","constructors","layer","FeatureLayer","TileLayer","container","utils","watchUtils","Search","jsonUtils","Extent","renderer","UniqueValueRenderer","ClassBreaksRenderer","ExtrudeSymbol3DLayer","PolygonSymbol3D","SimpleRenderer","SimpleMarkerSymbol","PictureMarkerSymbol","SimpleLineSymbol","SimpleFillSymbol","templates","renderers","symbols","warn","fatal","error","log","undefined","_config","logCounter","errorCounter","fatalCounter","warnCounter","message","_object","console","Error","changeBasemap","newPosition","createView","_logger","logger","obj","newObj","key","default","watcherRunning","View","viewingMode","starsEnabled","atmosphereEnabled","then","controlUI","whenTrue","extent","urlQuery","xmin","xmax","ymin","ymax","allLayers","minScale","maxScale","raw","visible","type","title","url","definitionExpression","environment","searchWidget","ui","add","remove","_ref","coordinates","camera","goTo","tilt","heading","showAll","hideAll","setOpacity","setVisibility","validate","layers","indx","id","create","_layer","layerConstructors","utilsConstructors","LayerType","fromJSON","findLayer","find","changeVisibility","visibility","_opacity","opacity","_interopRequireWildcard","start","_esriLoader","esriLoader","_view","dojoLoader","_options","cdn","isLoaded","bootstrap","err","dojoRequire","esriConfig","Map","Graphic","Camera","SceneView","GraphicsLayer","Collection","PointSymbol3D","ObjectSymbol3DLayer","Geometry","Point","on","forEach","elm","request","corsEnabledServers","push","proxyUrl","createMap","ground","_map","_layers","__webpack_exports__","getScript","document","querySelector","window","callback","script","createElement","src","dataset","onload","body","appendChild","script_1","onScriptLoad_1","removeEventListener","addEventListener"],"mappings":"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","file":"arceasy.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar prefix = exports.prefix = '[ArcEasy]';\n\nvar global = exports.global = {\n    map: '',\n    view: '',\n    options: {\n        element: '',\n        scale: 25000000,\n        center: {\n            longitude: -13.78,\n            latitude: -52.17\n        },\n        basemap: 'streets',\n        stars: true,\n        atmosphere: {\n            enable: true,\n            quality: 'low'\n        },\n        search: {\n            enable: false,\n            position: 'top-left',\n            index: 1\n        },\n        cors: '',\n        proxy: ''\n    },\n    loaded: false\n};\n\nvar constructors = exports.constructors = {\n    layer: {\n        FeatureLayer: '',\n        TileLayer: ''\n    },\n    map: '',\n    container: '',\n    view: '',\n    utils: {\n        watchUtils: '',\n        Search: '',\n        jsonUtils: '',\n        Extent: ''\n    },\n    renderer: {\n        UniqueValueRenderer: '',\n        ClassBreaksRenderer: '',\n        ExtrudeSymbol3DLayer: '',\n        PolygonSymbol3D: '',\n        SimpleRenderer: '',\n        SimpleMarkerSymbol: '',\n        PictureMarkerSymbol: '',\n        SimpleLineSymbol: '',\n        SimpleFillSymbol: ''\n    }\n};\n\nvar templates = exports.templates = {\n    renderers: [],\n    symbols: []\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.warn = exports.fatal = exports.error = exports.log = undefined;\n\nvar _config = __webpack_require__(0);\n\nvar logCounter = 0;\nvar errorCounter = 0;\nvar fatalCounter = 0;\nvar warnCounter = 0;\n\n/**\n * Add conter and prefix and execute simple console.log()\n * @param  {String} message - Your log text\n * @param  {Object} _object - If you pass an object or array, it's will be put together\n * @return {Function}\n */\nvar log = exports.log = function log(message, _object) {\n    var object = _object !== undefined ? _object : '';\n\n    logCounter++;\n\n    return console.log(logCounter + ' ' + _config.prefix + ' ' + message, object);\n};\n\n/**\n * Add conter and prefix and execute console.error()\n * @param  {String} message - Your log text\n * @param  {Object} _object - If you pass an object or array, it's will be put together\n * @return {Function}\n */\nvar error = exports.error = function error(message, _object) {\n    var object = _object !== undefined ? _object : '';\n\n    errorCounter++;\n\n    return console.error(errorCounter + ' ' + _config.prefix + ' ' + message, object);\n};\n\n/**\n * Add conter and prefix and create a throw new Error()\n * @param  {String} message - Your log text\n * @return {Function}\n */\nvar fatal = exports.fatal = function fatal(message) {\n    fatalCounter++;\n\n    throw new Error(fatalCounter + ' ' + _config.prefix + ' ' + message);\n};\n\n/**\n * Add conter and prefix and execute console.warn()\n * @param  {String} message - Your log text\n * @param  {Object} _object - If you pass an object or array, it's will be put together\n * @return {Function}\n */\nvar warn = exports.warn = function warn(message, _object) {\n    var object = _object !== undefined ? _object : '';\n\n    warnCounter++;\n\n    return console.warn(warnCounter + ' ' + _config.prefix + ' ' + message, object);\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.changeBasemap = exports.newPosition = exports.createView = undefined;\n\nvar _logger = __webpack_require__(1);\n\nvar logger = _interopRequireWildcard(_logger);\n\nvar _config = __webpack_require__(0);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Create view inside map\n * @param  {Object} map - The map object in memory\n * @param  {Function} View - ESRI View constructor\n * @param  {Object} options - Group of informations about your\n *                            app and how map will be\n * @param  {String} options.element - DOM element that map will be created\n * @param  {Number} options.scale - Initial map scale\n * @param  {Number} options.center.longitude - Center map Longitude\n * @param  {Number} options.center.latitude - Center map Latitude\n * @param  {String} options.basemap - Initial basemap\n * @param  {Boolean} options.stars - If stars is enabled\n * @param  {Boolean} options.atmosphere.enable - If atmosphere is enabled\n * @param  {Boolean} options.atmosphere.quality - Atmosphere quality\n * @param  {Boolean} options.search.enable - If search is enabled\n * @param  {Boolean} options.search.position - Search position\n * @param  {Boolean} options.search.index - Search index\n * @param  {Array} options.cors - A group of URLs that you need enable CORS\n * @param  {String} options.proxy - Single URL that will proxy your requests\n * @return {Object} Global view object descriptor\n */\nvar createView = exports.createView = function createView(map, View, options) {\n    if (_config.global.loaded) {\n        logger.log('Creating View...');\n\n        var view = new View({\n            container: options.element,\n            map: map,\n            scale: options.scale,\n            center: [options.longitude, options.latitude],\n            viewingMode: 'global',\n            starsEnabled: options.stars,\n            atmosphereEnabled: options.atmosphere\n        });\n\n        view.then(function () {\n            logger.log('View ready!');\n\n            controlUI(view);\n            watcherRunning(map, view);\n        });\n\n        return view;\n    } else {\n        logger.fatal('Fatal error! You need set some map options.');\n    }\n};\n\n/**\n * Watcher that observe the globe moviment\n * and make requests with specific parameters\n * like extent on 'definitionExpression'\n * @param  {Object} map - Global map object descriptor\n * @param  {Object} view - Global view object descriptor\n */\nvar watcherRunning = function watcherRunning(map, view) {\n    var watchUtils = _config.constructors.utils.watchUtils;\n\n    watchUtils.whenTrue(view, 'stationary', function () {\n        if (view.extent) {\n            var urlQuery = '!xmin=' + view.extent.xmin + '!xmax=' + view.extent.xmax + '!ymin=' + view.extent.ymin + '!ymax=' + view.extent.ymax;\n\n            logger.log('View changed! Mapping all layers...');\n\n            console.log(view.extent.center.latitude, view.extent.center.longitude, view.scale);\n\n            map.allLayers.map(function (layer) {\n                if ((view.scale < layer.minScale && view.scale > layer.maxScale || layer.minScale === 0 && layer.maxScale === 0) && layer.raw !== undefined && layer.visible) {\n                    if (layer.raw.type === 0) {\n                        logger.log('Getting extent to request ' + layer.title);\n                        logger.log('Requesting to server: ' + layer.raw.url + '/where=' + urlQuery);\n\n                        layer.definitionExpression = urlQuery;\n                    }\n\n                    logger.log('Drawing layer: ' + layer.title);\n                }\n            });\n        }\n    });\n};\n\n/**\n * Only setting some aspects from ESRI UI\n * @param  {Object} view - Global view object descriptor\n */\nvar controlUI = function controlUI(view) {\n    logger.log('Changing UI elements...');\n\n    view.environment.atmosphere.quality = _config.global.options.atmosphere.quality;\n\n    if (_config.global.options.search.enable) {\n        var Search = _config.constructors.utils.Search;\n        var searchWidget = new Search({\n            view: view\n        });\n\n        view.ui.add(searchWidget, {\n            position: _config.global.options.search.position,\n            index: _config.global.options.search.index\n        });\n    }\n\n    view.ui.remove(['zoom', 'compass', 'navigation-toggle']);\n};\n\n/**\n * Navigate on map using long/lat and camera position\n * @param  {Object} coordinates - Object that contain destiny longitude and latitude\n * @param  {Number} scale - Scale on earth\n * @param  {Object} camera - Object that contain new angles to position camera\n */\nvar newPosition = exports.newPosition = function newPosition(_ref) {\n    var coordinates = _ref.coordinates,\n        scale = _ref.scale,\n        camera = _ref.camera;\n\n    if (coordinates && scale && camera) {\n        var view = _config.global.view;\n\n        view.goTo({\n            center: [coordinates.longitude, coordinates.latitude],\n            scale: scale,\n            tilt: camera.tilt,\n            heading: camera.heading\n        });\n\n        logger.log('Changing map position...');\n    } else {\n        logger.error('You need set a new position formed by a pair of coordinates, a new scale and new camera positions');\n    }\n};\n\n/**\n * Change basemap on global map object\n * @param  {String} basemap - A basemap name that match with basemap's list from ESRI\n *                          'streets', 'satellite', 'hybrid', 'topo', 'gray',\n *                          'dark-gray', 'oceans', 'national-geographic',\n *                          'terrain', 'osm', 'dark-gray-vector', 'gray-vector',\n *                          'streets-vector', 'topo-vector', 'streets-night-vector',\n *                          'streets-relief-vector', 'streets-navigation-vector'\n *                          or 'none'\n */\nvar changeBasemap = exports.changeBasemap = function changeBasemap(basemap) {\n    if (basemap) {\n        var map = _config.global.map;\n\n        map.basemap = basemap;\n\n        logger.log('Change basemap...');\n    } else {\n        logger.error('You need set a new basemap');\n    }\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.showAll = exports.hideAll = exports.setOpacity = exports.setVisibility = exports.add = undefined;\n\nvar _logger = __webpack_require__(1);\n\nvar logger = _interopRequireWildcard(_logger);\n\nvar _config = __webpack_require__(0);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Recieve all layers, work and add on map\n * @constructor\n * @param  {Array} layers - List of layers\n */\nvar add = exports.add = function add(layers) {\n    layers.map(function (layer, indx) {\n        if (validate(layer)) {\n            logger.log('Adding id by index on layer');\n            layer.id = indx;\n\n            _config.global.map.add(create(layer));\n        }\n    });\n};\n\n/**\n * Validate single layer\n * @param  {Object} layer - Layer with some options\n * @return {Boolean} True or false to validation\n */\nvar validate = function validate(layer) {\n    if (layer) {\n        if (layer.title === undefined || layer.title === '' || !layer.title) {\n            logger.fatal('You need provide a layer title');\n\n            return false;\n        }\n\n        if (layer.visible === undefined || layer.visible === '') {\n            layer.visible = true;\n            logger.warn('You not set intial visible. Usign default: true');\n        }\n\n        if (layer.definitionExpression === undefined || layer.definitionExpression === '') {\n            layer.definitionExpression = '';\n            logger.warn('You not set intial definitionExpression. Usign default: \\'\\'');\n        }\n\n        if (layer.type === undefined || layer.type === '' || !layer.type) {\n            logger.fatal('You need provide a layer type (0 = FeatureLayer, 1 = TileLayer)');\n\n            return false;\n        }\n\n        if (layer.url === undefined || layer.url === '' || !layer.url) {\n            logger.fatal('You need provide an URL layer');\n\n            return false;\n        }\n\n        return true;\n    } else {\n        logger.fatal('You need pass some informations to describe your layer');\n        return false;\n    }\n};\n\n/**\n * Recieve a single layer object and return layer ready\n * @param {Object} _layer - Valid Layer object previously worked\n * @return {Object} Layer ready to add on map\n */\nvar create = function create(_layer) {\n    var layerConstructors = _config.constructors.layer;\n    var utilsConstructors = _config.constructors.utils;\n    var jsonUtils = utilsConstructors.jsonUtils;\n    var LayerType = void 0;\n\n    if (_layer.type === 0) {\n        logger.log('Creating new Feature Layer...');\n        LayerType = layerConstructors.FeatureLayer;\n    } else if (_layer.type === 1) {\n        logger.log('Creating new Tile Layer...');\n        LayerType = layerConstructors.TileLayer;\n    }\n\n    logger.log('Adding layer on map: ' + _layer.title + ' | Initial visibility: ' + _layer.visible);\n\n    var layer = new LayerType({\n        id: _layer.id,\n        url: _layer.url,\n        definitionExpression: _layer.definitionExpression,\n        raw: _layer,\n        visible: _layer.visible\n    });\n\n    logger.log('Loading layer from: ' + _layer.url);\n\n    if (layer.raw.renderer) {\n        logger.log('Applying renderer...');\n\n        layer.renderer = jsonUtils.fromJSON(layer.raw.renderer);\n    }\n\n    // if (layer.raw.popupTemplate) {\n    //     layer.popupTemplate = applyingPopups(layer.raw)\n    // }\n\n    layer.then(function () {\n        logger.log('Layer ' + layer.title + ' ready!');\n        logger.log('View waiting changes...');\n\n        if (layer.raw.type === 1) {\n            layer.minScale = layer.raw.minScale !== null ? layer.raw.minScale : 0;\n            layer.maxScale = layer.raw.maxScale !== null ? layer.raw.maxScale : 0;\n\n            logger.log('minScale: ' + layer.minScale + ' and maxScale: ' + layer.maxScale + ' defined manually');\n        }\n    });\n\n    return layer;\n};\n\n/**\n * Find specific layer in map\n * @param  {String|Number} _layer - Layer title or ID\n * @return {Object} Layer that will be manipulated\n */\nvar findLayer = function findLayer(_layer) {\n    var map = _config.global.map;\n\n    return map.allLayers.find(function (layer) {\n        if (layer.raw !== undefined) {\n            if (layer.raw.title === _layer || layer.raw.id === _layer) {\n                return layer;\n            }\n        }\n    });\n};\n\n/**\n * Change layer visibility\n * @param  {String|Number} _layer - Layer title or ID\n * @param  {Boolean} visibility - Set if layer is visible or not\n */\nvar setVisibility = exports.setVisibility = function setVisibility(_layer, visibility) {\n    var layer = findLayer(_layer);\n\n    if (layer) {\n        layer.visible = visibility;\n        logger.log('Change visibility of layer: ' + _layer + ' to: ' + visibility);\n    } else {\n        logger.error('Can\\'t find layer: ' + _layer + ' in map. You already added this layer?');\n    }\n};\n\n/**\n * Change layer opacity\n * @param  {String|Number} _layer - Layer title or ID\n * @param  {Number} _opacity - new opacity\n */\nvar setOpacity = exports.setOpacity = function setOpacity(_layer, _opacity) {\n    var layer = findLayer(_layer);\n\n    if (layer) {\n        layer.opacity = _opacity / 100;\n        logger.log('Change opacity of layer: ' + _layer + ' to: ' + _opacity);\n    } else {\n        logger.error('Can\\'t find layer: ' + _layer + ' in map. You already added this layer?');\n    }\n};\n\n/**\n * Change visibility of all layers using parameter\n * @param  {Boolean} visibility - new opacity\n */\nvar changeVisibility = function changeVisibility(visibility) {\n    var map = _config.global.map;\n\n    map.allLayers.map(function (layer) {\n        if (layer.raw !== undefined) {\n            if (layer.visible === !visibility) {\n                layer.visible = visibility;\n                logger.log('Change visibility of layer: ' + layer.raw.title + ' to: ' + visibility);\n            }\n        }\n    });\n};\n\n/**\n * Set visibility of all layers to false\n */\nvar hideAll = exports.hideAll = function hideAll() {\n    changeVisibility(false);\n};\n\n/**\n * Set visibility of all layers to true\n */\nvar showAll = exports.showAll = function showAll() {\n    changeVisibility(true);\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.start = exports.options = undefined;\n\nvar _esriLoader = __webpack_require__(6);\n\nvar esriLoader = _interopRequireWildcard(_esriLoader);\n\nvar _logger = __webpack_require__(1);\n\nvar logger = _interopRequireWildcard(_logger);\n\nvar _view = __webpack_require__(2);\n\nvar _config = __webpack_require__(0);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Simple function to set globaly options about the map\n * To start using ArcEasy you need invocate this function first\n * @param  {Object} options - Group of informations about your\n *                            app and how map will be\n * @param  {String} options.element - DOM element that map will be created\n * @param  {Number} options.scale - Initial map scale\n * @param  {Number} options.center.longitude - Center map Longitude\n * @param  {Number} options.center.latitude - Center map Latitude\n * @param  {String} options.basemap - Initial basemap\n * @param  {Boolean} options.stars - If stars is enabled\n * @param  {Boolean} options.atmosphere.enable - If atmosphere is enabled\n * @param  {Boolean} options.atmosphere.quality - Atmosphere quality\n * @param  {Boolean} options.search.enable - If search is enabled\n * @param  {Boolean} options.search.position - Search position\n * @param  {Boolean} options.search.index - Search index\n * @param  {Array} options.cors - A group of URLs that you need enable CORS\n * @param  {String} options.proxy - Single URL that will proxy your requests\n */\nvar options = exports.options = function options(_options) {\n    if (_options) {\n        _options.element || logger.fatal('You need pass an valid DOM element');\n\n        _options.scale || logger.warn('You not set scale. Usign default scale: ' + _config.global.options.scale);\n\n        _options.center.longitude || logger.warn('You not set intial longitude. Usign default: ' + _config.global.options.longitude);\n\n        _options.center.latitude || logger.warn('You not set intial latitude. Usign default: ' + _config.global.options.latitude);\n\n        _options.basemap || logger.warn('You not set initial basemap. Usign default: ' + _config.global.options.basemap);\n\n        _options.stars || logger.warn('You not set if map usign stars. Usign default: ' + _config.global.options.stars);\n\n        _options.atmosphere.enable || logger.warn('You not set if map usign atmosphere efect. Usign default: ' + _config.global.options.atmosphere.enable);\n\n        _options.atmosphere.quality || logger.warn('You not set atmosphere quality. Usign default: ' + _config.global.options.atmosphere.quality);\n\n        _options.search.enable || logger.warn('You not set Search. Usign default: ' + _config.global.options.search.enable);\n\n        _options.search.position || logger.warn('You not set Search position. Usign default: ' + _config.global.options.search.position);\n\n        _options.search.index || logger.warn('You not set Search index. Usign default: ' + _config.global.options.search.index);\n\n        _options.cors || logger.warn('You not set any URL to enable CORS requests');\n\n        _options.proxy || logger.warn('You not set any URL to proxy your requests');\n\n        _config.global.options = {\n            element: _options.element,\n            scale: _options.scale || _config.global.options.scale,\n            center: {\n                longitude: _options.longitude || _config.global.options.longitude,\n                latitude: _options.latitude || _config.global.options.latitude\n            },\n            basemap: _options.basemap || _config.global.options.basemap,\n            stars: _options.stars || _config.global.options.stars,\n            atmosphere: _options.atmosphere || _config.global.options.atmosphere,\n            cors: _options.cors || '',\n            proxy: _options.proxy || ''\n        };\n\n        _config.global.loaded = true;\n    } else {\n        logger.fatal('You need pass some informations to describe your map');\n    }\n};\n\n/**\n * The BigBang function\n * To create your map you need invocate this function\n * @param  {String} cdn - URL to official ESRI CDN or your own ESRI CDN provided by you\n */\nvar start = exports.start = function start(cdn) {\n    if (cdn !== undefined && _config.global.loaded) {\n        // Has the ArcGIS API been added to the page?\n        if (!esriLoader.isLoaded()) {\n            // No, lazy load it the ArcGIS API before using its classes\n            esriLoader.bootstrap(function (err) {\n                if (err) {\n                    logger.error(err);\n                }\n                // Once it's loaded, create the map\n                logger.log('Waiting ESRI server...');\n                dojoLoader();\n            }, {\n                // Use a specific version instead of latest 4.x\n                url: cdn\n            });\n        } else {\n            // ArcGIS API is already loaded, just create the map\n            logger.log('Waiting ESRI server...');\n            dojoLoader();\n        }\n    } else {\n        logger.fatal('Fatal error! You must provider an CDN.');\n    }\n};\n\n/**\n * Require all packages from ESRI CDN,\n * create necessary constructors,\n * create map,\n * create view,\n * and put in page\n */\nvar dojoLoader = function dojoLoader() {\n    if (_config.global.loaded) {\n        esriLoader.dojoRequire(['esri/config', 'esri/Map', 'esri/Graphic', 'esri/Camera', 'esri/views/SceneView', 'esri/layers/FeatureLayer', 'esri/layers/TileLayer', 'esri/layers/GraphicsLayer', 'esri/core/watchUtils', 'esri/core/Collection', 'esri/renderers/UniqueValueRenderer', 'esri/renderers/ClassBreaksRenderer', 'esri/renderers/SimpleRenderer', 'esri/renderers/support/jsonUtils', 'esri/symbols/ExtrudeSymbol3DLayer', 'esri/symbols/PolygonSymbol3D', 'esri/symbols/SimpleMarkerSymbol', 'esri/symbols/PictureMarkerSymbol', 'esri/symbols/SimpleLineSymbol', 'esri/symbols/SimpleFillSymbol', 'esri/symbols/PointSymbol3D', 'esri/symbols/ObjectSymbol3DLayer', 'esri/geometry/Geometry', 'esri/geometry/Point', 'esri/geometry/Extent', 'esri/widgets/Search', 'dojo/on', 'dojo/domReady!'], function (esriConfig, Map, Graphic, Camera, SceneView, FeatureLayer, TileLayer, GraphicsLayer, watchUtils, Collection, UniqueValueRenderer, ClassBreaksRenderer, SimpleRenderer, jsonUtils, ExtrudeSymbol3DLayer, PolygonSymbol3D, SimpleMarkerSymbol, PictureMarkerSymbol, SimpleLineSymbol, SimpleFillSymbol, PointSymbol3D, ObjectSymbol3DLayer, Geometry, Point, Extent, Search, on) {\n            _config.global.options.cors.forEach(function (elm) {\n                esriConfig.request.corsEnabledServers.push(elm);\n            });\n\n            esriConfig.request.proxyUrl = _config.global.options.proxy || '';\n\n            _config.constructors.Map = Map;\n            _config.constructors.SceneView = SceneView;\n\n            _config.constructors.layer.FeatureLayer = FeatureLayer;\n            _config.constructors.layer.TileLayer = TileLayer;\n            _config.constructors.layer.GraphicsLayer = GraphicsLayer;\n\n            _config.constructors.utils.watchUtils = watchUtils;\n            _config.constructors.utils.Search = Search;\n            _config.constructors.utils.jsonUtils = jsonUtils;\n            _config.constructors.utils.Extent = Extent;\n            _config.constructors.utils.Camera = Camera;\n\n            _config.constructors.renderer.UniqueValueRenderer = UniqueValueRenderer;\n            _config.constructors.renderer.ClassBreaksRenderer = ClassBreaksRenderer;\n            _config.constructors.renderer.ExtrudeSymbol3DLayer = ExtrudeSymbol3DLayer;\n            _config.constructors.renderer.PolygonSymbol3D = PolygonSymbol3D;\n            _config.constructors.renderer.SimpleRenderer = SimpleRenderer;\n            _config.constructors.renderer.SimpleMarkerSymbol = SimpleMarkerSymbol;\n            _config.constructors.renderer.PictureMarkerSymbol = PictureMarkerSymbol;\n            _config.constructors.renderer.SimpleLineSymbol = SimpleLineSymbol;\n            _config.constructors.renderer.SimpleFillSymbol = SimpleFillSymbol;\n            _config.constructors.renderer.Graphic = Graphic;\n            _config.constructors.renderer.Point = Point;\n            _config.constructors.renderer.PointSymbol3D = PointSymbol3D;\n            _config.constructors.renderer.ObjectSymbol3DLayer = ObjectSymbol3DLayer;\n\n            if (_config.constructors.Map && _config.constructors.SceneView) {\n                logger.log('All constructorss created!');\n\n                _config.global.map = createMap(_config.constructors.Map, _config.global.options.basemap);\n\n                _config.global.view = (0, _view.createView)(_config.global.map, _config.constructors.SceneView, _config.global.options);\n            } else {\n                logger.error('Error during creating the necessary constructors... Try again.');\n            }\n        });\n    } else {\n        logger.fatal('Fatal error! You need set some map options.');\n    }\n};\n\n/**\n * Create map using ESRI Map constructor\n * @param  {Function} Map - ESRI Map constructor\n * @param  {String} basemap - The initial basemap\n * @return {Object} Global map object descriptor\n */\nvar createMap = function createMap(Map, basemap) {\n    logger.log('Creating map...');\n\n    var map = new Map({\n        basemap: basemap,\n        ground: 'world-elevation',\n        layers: []\n    });\n\n    return map;\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.layers = exports.view = exports.map = undefined;\n\nvar _map = __webpack_require__(4);\n\nvar map = _interopRequireWildcard(_map);\n\nvar _view = __webpack_require__(2);\n\nvar view = _interopRequireWildcard(_view);\n\nvar _layers = __webpack_require__(3);\n\nvar layers = _interopRequireWildcard(_layers);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.map = map;\nexports.view = view;\nexports.layers = layers;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"isLoaded\"] = isLoaded;\n/* harmony export (immutable) */ __webpack_exports__[\"bootstrap\"] = bootstrap;\n/* harmony export (immutable) */ __webpack_exports__[\"dojoRequire\"] = dojoRequire;\n// get the script injected by this library\nfunction getScript() {\n    return document.querySelector('script[data-esri-loader]');\n}\n// has ArcGIS API been loaded on the page yet?\nfunction isLoaded() {\n    // would like to just use window.require, but fucking typescript\n    return typeof window['require'] !== 'undefined' && getScript();\n}\n// load the ArcGIS API on the page\nfunction bootstrap(callback, options) {\n    if (options === void 0) { options = {}; }\n    // default options\n    if (!options.url) {\n        options.url = 'https://js.arcgis.com/4.3/';\n    }\n    // don't reload API if it is already loaded or in the process of loading\n    if (getScript()) {\n        callback(new Error('The ArcGIS API for JavaScript is already loaded.'));\n        return;\n    }\n    // create a script object whose source points to the API\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = options.url;\n    script.dataset['esriLoader'] = 'loading';\n    // once the script is loaded...\n    script.onload = function () {\n        // update the status of the script\n        script.dataset['esriLoader'] = 'loaded';\n        // we can now use Dojo's require() to load esri and dojo AMD modules\n        var dojoRequire = window['require'];\n        if (callback) {\n            // let the caller know that the API has been successfully loaded\n            // and as a convenience, return the require function\n            // in case they want to use it directly\n            callback(null, dojoRequire);\n        }\n    };\n    // load the script\n    document.body.appendChild(script);\n}\nfunction dojoRequire(modules, callback) {\n    if (isLoaded()) {\n        window['require'](modules, callback);\n    }\n    else {\n        var script_1 = getScript();\n        if (script_1) {\n            // Not yet loaded but script is in the body - use callback once loaded\n            var onScriptLoad_1 = function () {\n                window['require'](modules, callback);\n                script_1.removeEventListener('load', onScriptLoad_1, false);\n            };\n            script_1.addEventListener('load', onScriptLoad_1);\n        }\n        else {\n            // Not bootstrapped\n            throw new Error('The ArcGIS API for JavaScript has not been loaded. You must first call esriLoader.bootstrap()');\n        }\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    isLoaded: isLoaded,\n    bootstrap: bootstrap,\n    dojoRequire: dojoRequire\n});\n//# sourceMappingURL=esri-loader.js.map\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// arceasy.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 801b42b83388b6329a04","export const prefix = '[ArcEasy]'\n\nexport const global = {\n    map: '',\n    view: '',\n    options: {\n        element: '',\n        scale: 25000000,\n        center: {\n            longitude: -13.78,\n            latitude: -52.17\n        },\n        basemap: 'streets',\n        stars: true,\n        atmosphere: {\n            enable: true,\n            quality: 'low'\n        },\n        search: {\n            enable: false,\n            position: 'top-left',\n            index: 1\n        },\n        cors: '',\n        proxy: ''\n    },\n    loaded: false\n}\n\nexport const constructors = {\n    layer: {\n        FeatureLayer: '',\n        TileLayer: ''\n    },\n    map: '',\n    container: '',\n    view: '',\n    utils: {\n        watchUtils: '',\n        Search: '',\n        jsonUtils: '',\n        Extent: ''\n    },\n    renderer: {\n        UniqueValueRenderer: '',\n        ClassBreaksRenderer: '',\n        ExtrudeSymbol3DLayer: '',\n        PolygonSymbol3D: '',\n        SimpleRenderer: '',\n        SimpleMarkerSymbol: '',\n        PictureMarkerSymbol: '',\n        SimpleLineSymbol: '',\n        SimpleFillSymbol: ''\n    }\n}\n\nexport const templates = {\n    renderers: [],\n    symbols: []\n}\n\n\n\n// WEBPACK FOOTER //\n// ./config.js","import { prefix } from './config'\n\nlet logCounter = 0\nlet errorCounter = 0\nlet fatalCounter = 0\nlet warnCounter = 0\n\n/**\n * Add conter and prefix and execute simple console.log()\n * @param  {String} message - Your log text\n * @param  {Object} _object - If you pass an object or array, it's will be put together\n * @return {Function}\n */\nexport const log = (message, _object) => {\n    const object = _object !== undefined\n        ? _object\n        : ''\n\n    logCounter++\n\n    return console.log(`${logCounter} ${prefix} ${message}`, object)\n}\n\n/**\n * Add conter and prefix and execute console.error()\n * @param  {String} message - Your log text\n * @param  {Object} _object - If you pass an object or array, it's will be put together\n * @return {Function}\n */\nexport const error = (message, _object) => {\n    const object = _object !== undefined\n        ? _object\n        : ''\n\n    errorCounter++\n\n    return console.error(`${errorCounter} ${prefix} ${message}`, object)\n}\n\n/**\n * Add conter and prefix and create a throw new Error()\n * @param  {String} message - Your log text\n * @return {Function}\n */\nexport const fatal = (message) => {\n    fatalCounter++\n\n    throw new Error(`${fatalCounter} ${prefix} ${message}`)\n}\n\n/**\n * Add conter and prefix and execute console.warn()\n * @param  {String} message - Your log text\n * @param  {Object} _object - If you pass an object or array, it's will be put together\n * @return {Function}\n */\nexport const warn = (message, _object) => {\n    const object = _object !== undefined\n        ? _object\n        : ''\n\n    warnCounter++\n\n    return console.warn(`${warnCounter} ${prefix} ${message}`, object)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./logger.js","import * as logger from './logger'\nimport { global, constructors } from './config'\n\n/**\n * Create view inside map\n * @param  {Object} map - The map object in memory\n * @param  {Function} View - ESRI View constructor\n * @param  {Object} options - Group of informations about your\n *                            app and how map will be\n * @param  {String} options.element - DOM element that map will be created\n * @param  {Number} options.scale - Initial map scale\n * @param  {Number} options.center.longitude - Center map Longitude\n * @param  {Number} options.center.latitude - Center map Latitude\n * @param  {String} options.basemap - Initial basemap\n * @param  {Boolean} options.stars - If stars is enabled\n * @param  {Boolean} options.atmosphere.enable - If atmosphere is enabled\n * @param  {Boolean} options.atmosphere.quality - Atmosphere quality\n * @param  {Boolean} options.search.enable - If search is enabled\n * @param  {Boolean} options.search.position - Search position\n * @param  {Boolean} options.search.index - Search index\n * @param  {Array} options.cors - A group of URLs that you need enable CORS\n * @param  {String} options.proxy - Single URL that will proxy your requests\n * @return {Object} Global view object descriptor\n */\nexport const createView = (map, View, options) => {\n    if (global.loaded) {\n        logger.log('Creating View...')\n\n        const view = new View({\n            container: options.element,\n            map: map,\n            scale: options.scale,\n            center: [\n                options.longitude,\n                options.latitude\n            ],\n            viewingMode: 'global',\n            starsEnabled: options.stars,\n            atmosphereEnabled: options.atmosphere\n        })\n\n        view.then(() => {\n            logger.log('View ready!')\n\n            controlUI(view)\n            watcherRunning(map, view)\n        })\n\n        return view\n    } else {\n        logger.fatal(`Fatal error! You need set some map options.`)\n    }\n}\n\n/**\n * Watcher that observe the globe moviment\n * and make requests with specific parameters\n * like extent on 'definitionExpression'\n * @param  {Object} map - Global map object descriptor\n * @param  {Object} view - Global view object descriptor\n */\nconst watcherRunning = (map, view) => {\n    const watchUtils = constructors.utils.watchUtils\n\n    watchUtils.whenTrue(view, 'stationary', () => {\n        if (view.extent) {\n            const urlQuery = `!xmin=${view.extent.xmin}!xmax=${view.extent.xmax}!ymin=${view.extent.ymin}!ymax=${view.extent.ymax}`\n\n            logger.log(`View changed! Mapping all layers...`)\n\n            console.log(view.extent.center.latitude, view.extent.center.longitude, view.scale)\n\n            map.allLayers.map(layer => {\n                if (((view.scale < layer.minScale &&\n                        view.scale > layer.maxScale) ||\n                        (layer.minScale === 0 &&\n                        layer.maxScale === 0)) &&\n                        (layer.raw !== undefined &&\n                        layer.visible)) {\n                    if (layer.raw.type === 0) {\n                        logger.log(`Getting extent to request ${layer.title}`)\n                        logger.log(`Requesting to server: ${layer.raw.url}/where=${urlQuery}`)\n\n                        layer.definitionExpression = urlQuery\n                    }\n\n                    logger.log(`Drawing layer: ${layer.title}`)\n                }\n            })\n        }\n    })\n}\n\n/**\n * Only setting some aspects from ESRI UI\n * @param  {Object} view - Global view object descriptor\n */\nconst controlUI = view => {\n    logger.log('Changing UI elements...')\n\n    view.environment.atmosphere.quality = global.options.atmosphere.quality\n\n    if (global.options.search.enable) {\n        const Search = constructors.utils.Search\n        const searchWidget = new Search({\n            view: view\n        })\n\n        view.ui.add(searchWidget, {\n            position: global.options.search.position,\n            index: global.options.search.index\n        })\n    }\n\n    view.ui.remove([\n        'zoom',\n        'compass',\n        'navigation-toggle'\n    ])\n}\n\n/**\n * Navigate on map using long/lat and camera position\n * @param  {Object} coordinates - Object that contain destiny longitude and latitude\n * @param  {Number} scale - Scale on earth\n * @param  {Object} camera - Object that contain new angles to position camera\n */\nexport const newPosition = ({coordinates, scale, camera}) => {\n    if (coordinates && scale && camera) {\n        const view = global.view\n\n        view.goTo({\n            center: [\n                coordinates.longitude,\n                coordinates.latitude\n            ],\n            scale: scale,\n            tilt: camera.tilt,\n            heading: camera.heading\n        })\n\n        logger.log(`Changing map position...`)\n    } else {\n        logger.error(`You need set a new position formed by a pair of coordinates, a new scale and new camera positions`)\n    }\n}\n\n/**\n * Change basemap on global map object\n * @param  {String} basemap - A basemap name that match with basemap's list from ESRI\n *                          'streets', 'satellite', 'hybrid', 'topo', 'gray',\n *                          'dark-gray', 'oceans', 'national-geographic',\n *                          'terrain', 'osm', 'dark-gray-vector', 'gray-vector',\n *                          'streets-vector', 'topo-vector', 'streets-night-vector',\n *                          'streets-relief-vector', 'streets-navigation-vector'\n *                          or 'none'\n */\nexport const changeBasemap = basemap => {\n    if (basemap) {\n        const map = global.map\n\n        map.basemap = basemap\n\n        logger.log(`Change basemap...`)\n    } else {\n        logger.error(`You need set a new basemap`)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./view.js","import * as logger from './logger'\nimport { global, constructors } from './config'\n\n/**\n * Recieve all layers, work and add on map\n * @constructor\n * @param  {Array} layers - List of layers\n */\nexport const add = layers => {\n    layers.map((layer, indx) => {\n        if (validate(layer)) {\n            logger.log(`Adding id by index on layer`)\n            layer.id = indx\n\n            global.map.add(create(layer))\n        }\n    })\n}\n\n/**\n * Validate single layer\n * @param  {Object} layer - Layer with some options\n * @return {Boolean} True or false to validation\n */\nconst validate = layer => {\n    if (layer) {\n        if (layer.title === undefined ||\n            layer.title === '' ||\n            !layer.title) {\n            logger.fatal(`You need provide a layer title`)\n\n            return false\n        }\n\n        if (layer.visible === undefined ||\n            layer.visible === '') {\n            layer.visible = true\n            logger.warn(`You not set intial visible. Usign default: true`)\n        }\n\n        if (layer.definitionExpression === undefined ||\n            layer.definitionExpression === '') {\n            layer.definitionExpression = ''\n            logger.warn(`You not set intial definitionExpression. Usign default: ''`)\n        }\n\n        if (layer.type === undefined ||\n            layer.type === '' ||\n            !layer.type) {\n            logger.fatal(`You need provide a layer type (0 = FeatureLayer, 1 = TileLayer)`)\n\n            return false\n        }\n\n        if (layer.url === undefined ||\n            layer.url === '' ||\n            !layer.url) {\n            logger.fatal(`You need provide an URL layer`)\n\n            return false\n        }\n\n        return true\n    } else {\n        logger.fatal(`You need pass some informations to describe your layer`)\n        return false\n    }\n}\n\n/**\n * Recieve a single layer object and return layer ready\n * @param {Object} _layer - Valid Layer object previously worked\n * @return {Object} Layer ready to add on map\n */\nconst create = (_layer) => {\n    const layerConstructors = constructors.layer\n    const utilsConstructors = constructors.utils\n    const jsonUtils = utilsConstructors.jsonUtils\n    let LayerType\n\n    if (_layer.type === 0) {\n        logger.log(`Creating new Feature Layer...`)\n        LayerType = layerConstructors.FeatureLayer\n    } else if (_layer.type === 1) {\n        logger.log(`Creating new Tile Layer...`)\n        LayerType = layerConstructors.TileLayer\n    }\n\n    logger.log(`Adding layer on map: ${_layer.title} | Initial visibility: ${_layer.visible}`)\n\n    const layer = new LayerType({\n        id: _layer.id,\n        url: _layer.url,\n        definitionExpression: _layer.definitionExpression,\n        raw: _layer,\n        visible: _layer.visible\n    })\n\n    logger.log(`Loading layer from: ${_layer.url}`)\n\n    if (layer.raw.renderer) {\n        logger.log(`Applying renderer...`)\n\n        layer.renderer = jsonUtils.fromJSON(layer.raw.renderer)\n    }\n\n    // if (layer.raw.popupTemplate) {\n    //     layer.popupTemplate = applyingPopups(layer.raw)\n    // }\n\n    layer.then(() => {\n        logger.log(`Layer ${layer.title} ready!`)\n        logger.log(`View waiting changes...`)\n\n        if (layer.raw.type === 1) {\n            layer.minScale = layer.raw.minScale !== null\n                ? layer.raw.minScale\n                : 0\n            layer.maxScale = layer.raw.maxScale !== null\n                ? layer.raw.maxScale\n                : 0\n\n            logger.log(`minScale: ${layer.minScale} and maxScale: ${layer.maxScale} defined manually`)\n        }\n    })\n\n    return layer\n}\n\n/**\n * Find specific layer in map\n * @param  {String|Number} _layer - Layer title or ID\n * @return {Object} Layer that will be manipulated\n */\nconst findLayer = _layer => {\n    const map = global.map\n\n    return map.allLayers.find(layer => {\n        if (layer.raw !== undefined) {\n            if (layer.raw.title === _layer ||\n                layer.raw.id === _layer) {\n                return layer\n            }\n        }\n    })\n}\n\n/**\n * Change layer visibility\n * @param  {String|Number} _layer - Layer title or ID\n * @param  {Boolean} visibility - Set if layer is visible or not\n */\nexport const setVisibility = (_layer, visibility) => {\n    const layer = findLayer(_layer)\n\n    if (layer) {\n        layer.visible = visibility\n        logger.log(`Change visibility of layer: ${_layer} to: ${visibility}`)\n    } else {\n        logger.error(`Can't find layer: ${_layer} in map. You already added this layer?`)\n    }\n}\n\n/**\n * Change layer opacity\n * @param  {String|Number} _layer - Layer title or ID\n * @param  {Number} _opacity - new opacity\n */\nexport const setOpacity = (_layer, _opacity) => {\n    const layer = findLayer(_layer)\n\n    if (layer) {\n        layer.opacity = _opacity / 100\n        logger.log(`Change opacity of layer: ${_layer} to: ${_opacity}`)\n    } else {\n        logger.error(`Can't find layer: ${_layer} in map. You already added this layer?`)\n    }\n}\n\n/**\n * Change visibility of all layers using parameter\n * @param  {Boolean} visibility - new opacity\n */\nconst changeVisibility = visibility => {\n    const map = global.map\n\n    map.allLayers.map(layer => {\n        if (layer.raw !== undefined) {\n            if (layer.visible === !visibility) {\n                layer.visible = visibility\n                logger.log(`Change visibility of layer: ${layer.raw.title} to: ${visibility}`)\n            }\n        }\n    })\n}\n\n/**\n * Set visibility of all layers to false\n */\nexport const hideAll = () => {\n    changeVisibility(false)\n}\n\n/**\n * Set visibility of all layers to true\n */\nexport const showAll = () => {\n    changeVisibility(true)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./layers.js","import * as esriLoader from 'esri-loader'\nimport * as logger from './logger'\nimport { createView } from './view'\nimport { global, constructors } from './config'\n\n/**\n * Simple function to set globaly options about the map\n * To start using ArcEasy you need invocate this function first\n * @param  {Object} options - Group of informations about your\n *                            app and how map will be\n * @param  {String} options.element - DOM element that map will be created\n * @param  {Number} options.scale - Initial map scale\n * @param  {Number} options.center.longitude - Center map Longitude\n * @param  {Number} options.center.latitude - Center map Latitude\n * @param  {String} options.basemap - Initial basemap\n * @param  {Boolean} options.stars - If stars is enabled\n * @param  {Boolean} options.atmosphere.enable - If atmosphere is enabled\n * @param  {Boolean} options.atmosphere.quality - Atmosphere quality\n * @param  {Boolean} options.search.enable - If search is enabled\n * @param  {Boolean} options.search.position - Search position\n * @param  {Boolean} options.search.index - Search index\n * @param  {Array} options.cors - A group of URLs that you need enable CORS\n * @param  {String} options.proxy - Single URL that will proxy your requests\n */\nexport const options = options => {\n    if (options) {\n        options.element ||\n            logger.fatal(`You need pass an valid DOM element`)\n\n        options.scale ||\n            logger.warn(`You not set scale. Usign default scale: ${global.options.scale}`)\n\n        options.center.longitude ||\n            logger.warn(`You not set intial longitude. Usign default: ${global.options.longitude}`)\n\n        options.center.latitude ||\n            logger.warn(`You not set intial latitude. Usign default: ${global.options.latitude}`)\n\n        options.basemap ||\n            logger.warn(`You not set initial basemap. Usign default: ${global.options.basemap}`)\n\n        options.stars ||\n            logger.warn(`You not set if map usign stars. Usign default: ${global.options.stars}`)\n\n        options.atmosphere.enable ||\n            logger.warn(`You not set if map usign atmosphere efect. Usign default: ${global.options.atmosphere.enable}`)\n\n        options.atmosphere.quality ||\n            logger.warn(`You not set atmosphere quality. Usign default: ${global.options.atmosphere.quality}`)\n\n        options.search.enable ||\n            logger.warn(`You not set Search. Usign default: ${global.options.search.enable}`)\n\n        options.search.position ||\n            logger.warn(`You not set Search position. Usign default: ${global.options.search.position}`)\n\n        options.search.index ||\n            logger.warn(`You not set Search index. Usign default: ${global.options.search.index}`)\n\n        options.cors ||\n            logger.warn(`You not set any URL to enable CORS requests`)\n\n        options.proxy ||\n            logger.warn(`You not set any URL to proxy your requests`)\n\n        global.options = {\n            element: options.element,\n            scale: options.scale || global.options.scale,\n            center: {\n                longitude: options.longitude || global.options.longitude,\n                latitude: options.latitude || global.options.latitude\n            },\n            basemap: options.basemap || global.options.basemap,\n            stars: options.stars || global.options.stars,\n            atmosphere: options.atmosphere || global.options.atmosphere,\n            cors: options.cors || '',\n            proxy: options.proxy || ''\n        }\n\n        global.loaded = true\n    } else {\n        logger.fatal(`You need pass some informations to describe your map`)\n    }\n}\n\n/**\n * The BigBang function\n * To create your map you need invocate this function\n * @param  {String} cdn - URL to official ESRI CDN or your own ESRI CDN provided by you\n */\nexport const start = cdn => {\n    if (cdn !== undefined && global.loaded) {\n        // Has the ArcGIS API been added to the page?\n        if (!esriLoader.isLoaded()) {\n            // No, lazy load it the ArcGIS API before using its classes\n            esriLoader.bootstrap(err => {\n                if (err) {\n                    logger.error(err)\n                }\n                // Once it's loaded, create the map\n                logger.log(`Waiting ESRI server...`)\n                dojoLoader()\n            }, {\n                // Use a specific version instead of latest 4.x\n                url: cdn\n            })\n        } else {\n            // ArcGIS API is already loaded, just create the map\n            logger.log(`Waiting ESRI server...`)\n            dojoLoader()\n        }\n    } else {\n        logger.fatal(`Fatal error! You must provider an CDN.`)\n    }\n}\n\n/**\n * Require all packages from ESRI CDN,\n * create necessary constructors,\n * create map,\n * create view,\n * and put in page\n */\nconst dojoLoader = () => {\n    if (global.loaded) {\n        esriLoader.dojoRequire([\n            'esri/config',\n            'esri/Map',\n            'esri/Graphic',\n            'esri/Camera',\n\n            'esri/views/SceneView',\n\n            'esri/layers/FeatureLayer',\n            'esri/layers/TileLayer',\n            'esri/layers/GraphicsLayer',\n\n            'esri/core/watchUtils',\n            'esri/core/Collection',\n\n            'esri/renderers/UniqueValueRenderer',\n            'esri/renderers/ClassBreaksRenderer',\n            'esri/renderers/SimpleRenderer',\n            'esri/renderers/support/jsonUtils',\n\n            'esri/symbols/ExtrudeSymbol3DLayer',\n            'esri/symbols/PolygonSymbol3D',\n            'esri/symbols/SimpleMarkerSymbol',\n            'esri/symbols/PictureMarkerSymbol',\n            'esri/symbols/SimpleLineSymbol',\n            'esri/symbols/SimpleFillSymbol',\n            'esri/symbols/PointSymbol3D',\n            'esri/symbols/ObjectSymbol3DLayer',\n\n            'esri/geometry/Geometry',\n            'esri/geometry/Point',\n            'esri/geometry/Extent',\n\n            'esri/widgets/Search',\n\n            'dojo/on',\n            'dojo/domReady!'\n        ], (\n            esriConfig,\n            Map,\n            Graphic,\n            Camera,\n            SceneView,\n            FeatureLayer,\n            TileLayer,\n            GraphicsLayer,\n            watchUtils,\n            Collection,\n            UniqueValueRenderer,\n            ClassBreaksRenderer,\n            SimpleRenderer,\n            jsonUtils,\n            ExtrudeSymbol3DLayer,\n            PolygonSymbol3D,\n            SimpleMarkerSymbol,\n            PictureMarkerSymbol,\n            SimpleLineSymbol,\n            SimpleFillSymbol,\n            PointSymbol3D,\n            ObjectSymbol3DLayer,\n            Geometry,\n            Point,\n            Extent,\n            Search,\n            on\n        ) => {\n            global.options.cors.forEach(elm => {\n                esriConfig.request.corsEnabledServers.push(elm)\n            })\n\n            esriConfig.request.proxyUrl = global.options.proxy || ''\n\n            constructors.Map = Map\n            constructors.SceneView = SceneView\n\n            constructors.layer.FeatureLayer = FeatureLayer\n            constructors.layer.TileLayer = TileLayer\n            constructors.layer.GraphicsLayer = GraphicsLayer\n\n            constructors.utils.watchUtils = watchUtils\n            constructors.utils.Search = Search\n            constructors.utils.jsonUtils = jsonUtils\n            constructors.utils.Extent = Extent\n            constructors.utils.Camera = Camera\n\n            constructors.renderer.UniqueValueRenderer = UniqueValueRenderer\n            constructors.renderer.ClassBreaksRenderer = ClassBreaksRenderer\n            constructors.renderer.ExtrudeSymbol3DLayer = ExtrudeSymbol3DLayer\n            constructors.renderer.PolygonSymbol3D = PolygonSymbol3D\n            constructors.renderer.SimpleRenderer = SimpleRenderer\n            constructors.renderer.SimpleMarkerSymbol = SimpleMarkerSymbol\n            constructors.renderer.PictureMarkerSymbol = PictureMarkerSymbol\n            constructors.renderer.SimpleLineSymbol = SimpleLineSymbol\n            constructors.renderer.SimpleFillSymbol = SimpleFillSymbol\n            constructors.renderer.Graphic = Graphic\n            constructors.renderer.Point = Point\n            constructors.renderer.PointSymbol3D = PointSymbol3D\n            constructors.renderer.ObjectSymbol3DLayer = ObjectSymbol3DLayer\n\n            if (constructors.Map && constructors.SceneView) {\n                logger.log(`All constructorss created!`)\n\n                global.map = createMap(\n                    constructors.Map,\n                    global.options.basemap\n                )\n\n                global.view = createView(\n                    global.map,\n                    constructors.SceneView,\n                    global.options\n                )\n            } else {\n                logger.error(`Error during creating the necessary constructors... Try again.`)\n            }\n        })\n    } else {\n        logger.fatal(`Fatal error! You need set some map options.`)\n    }\n}\n\n/**\n * Create map using ESRI Map constructor\n * @param  {Function} Map - ESRI Map constructor\n * @param  {String} basemap - The initial basemap\n * @return {Object} Global map object descriptor\n */\nconst createMap = (Map, basemap) => {\n    logger.log(`Creating map...`)\n\n    const map = new Map({\n        basemap: basemap,\n        ground: 'world-elevation',\n        layers: []\n    })\n\n    return map\n}\n\n\n\n// WEBPACK FOOTER //\n// ./map.js","import * as map from './map'\nimport * as view from './view'\nimport * as layers from './layers'\n\nexport {\n    map,\n    view,\n    layers\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","// get the script injected by this library\nfunction getScript() {\n    return document.querySelector('script[data-esri-loader]');\n}\n// has ArcGIS API been loaded on the page yet?\nexport function isLoaded() {\n    // would like to just use window.require, but fucking typescript\n    return typeof window['require'] !== 'undefined' && getScript();\n}\n// load the ArcGIS API on the page\nexport function bootstrap(callback, options) {\n    if (options === void 0) { options = {}; }\n    // default options\n    if (!options.url) {\n        options.url = 'https://js.arcgis.com/4.3/';\n    }\n    // don't reload API if it is already loaded or in the process of loading\n    if (getScript()) {\n        callback(new Error('The ArcGIS API for JavaScript is already loaded.'));\n        return;\n    }\n    // create a script object whose source points to the API\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = options.url;\n    script.dataset['esriLoader'] = 'loading';\n    // once the script is loaded...\n    script.onload = function () {\n        // update the status of the script\n        script.dataset['esriLoader'] = 'loaded';\n        // we can now use Dojo's require() to load esri and dojo AMD modules\n        var dojoRequire = window['require'];\n        if (callback) {\n            // let the caller know that the API has been successfully loaded\n            // and as a convenience, return the require function\n            // in case they want to use it directly\n            callback(null, dojoRequire);\n        }\n    };\n    // load the script\n    document.body.appendChild(script);\n}\nexport function dojoRequire(modules, callback) {\n    if (isLoaded()) {\n        window['require'](modules, callback);\n    }\n    else {\n        var script_1 = getScript();\n        if (script_1) {\n            // Not yet loaded but script is in the body - use callback once loaded\n            var onScriptLoad_1 = function () {\n                window['require'](modules, callback);\n                script_1.removeEventListener('load', onScriptLoad_1, false);\n            };\n            script_1.addEventListener('load', onScriptLoad_1);\n        }\n        else {\n            // Not bootstrapped\n            throw new Error('The ArcGIS API for JavaScript has not been loaded. You must first call esriLoader.bootstrap()');\n        }\n    }\n}\nexport default {\n    isLoaded: isLoaded,\n    bootstrap: bootstrap,\n    dojoRequire: dojoRequire\n};\n//# sourceMappingURL=esri-loader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/esri-loader/src/esri-loader.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}